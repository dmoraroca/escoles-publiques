@model dynamic
@{
    // Expecting a JSON string or an object in Model
    var optionsJson = Model is string ? Model : System.Text.Json.JsonSerializer.Serialize(Model);

    // Try to read common options server-side for rendering
    string submitText = "Guardar";
    string cancelText = "CancelÂ·lar";
    bool disabledByDefault = true;
    string cancelAction = null;
    string privacySelector = null;
    if (Model != null)
    {
        try {
            var dyn = Model as dynamic;
            submitText = dyn.submitText ?? submitText;
            cancelText = dyn.cancelText ?? cancelText;
            disabledByDefault = dyn.disabledByDefault ?? disabledByDefault;
            cancelAction = dyn.cancelAction ?? cancelAction;
            privacySelector = dyn.privacySelector ?? privacySelector;
        } catch { }
    }
}

<div class="save-cancel-component" data-options='@Html.Raw(optionsJson)'>
    <div class="d-flex align-items-center gap-3">
        <div class="form-check mb-0">
            <input id="AgreesToPrivacy" name="AgreesToPrivacy" class="form-check-input" type="checkbox" />
            <label class="form-check-label small" for="AgreesToPrivacy">Accepto les <a asp-controller="Home" asp-action="Privacy">condicions de privacitat</a></label>
        </div>

        <button type="submit" class="btn btn-success save-btn" @(disabledByDefault ? "disabled aria-disabled=\"true\"" : "")>@submitText</button>

        <button type="button" class="btn btn-secondary cancel-btn" data-cancel-action="@cancelAction">@cancelText</button>
    </div>
</div>
