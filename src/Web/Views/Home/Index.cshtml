@{
    ViewData["Title"] = "Inici";
}

@section Styles {
    <link rel="stylesheet" href="~/css/search-results.css" />
}

<!-- Hero Section with Search -->
<section class="hero-section bg-light py-5">
    <div class="container">
        <div class="row">
            <!-- Component 1: Buscador -->
            <div class="col-12 col-md-6">
                @await Html.PartialAsync("~/Views/Search/_SearchBar.cshtml")
            </div>
            
            <!-- Component 2: Escoles favorites -->
            @if ((ViewBag.UserRole as string) == "ADM")
            {
                <div class="col-12 col-md-6">
                    @await Component.InvokeAsync("FavoriteSchools")
                </div>
            }
        </div>
    </div>
</section>


<!-- Component 3: Àmbits o Dashboard Usuari -->
@if ((ViewBag.UserRole as string) == "ADM")
{
    @await Component.InvokeAsync("Scopes")
}
else if ((ViewBag.UserRole as string) == "USER")
{
    @await Html.PartialAsync("~/Views/User/Dashboard.cshtml")
}

<!-- Component 4: Resultats de cerca (només si hi ha cerca) -->
@if (!string.IsNullOrEmpty(ViewBag.SearchQuery as string) || !string.IsNullOrEmpty(ViewBag.ScopeName as string))
{
    @await Component.InvokeAsync("SearchResults", new { searchQuery = ViewBag.SearchQuery, scopeName = ViewBag.ScopeName })
}