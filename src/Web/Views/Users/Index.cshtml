@using Web.Helpers
@using Web.Models
@model IEnumerable<Web.Models.UserViewModel>

@{
    ViewData["Title"] = Localizer["Usuaris (Alumnes)"];

    var tableConfig = new TableViewModel<UserViewModel>
    {
        Data = Model,
        EntityName = Localizer["Usuaris (Alumnes)"].Value,
        ControllerName = "Users",
        EmptyMessage = Localizer["No hi ha usuaris-alumne registrats."].Value,
        Columns = new List<ColumnConfig>
        {
            new ColumnConfig { PropertyName = "FirstName", DisplayName = Localizer["Nom"].Value, IsSortable = true },
            new ColumnConfig { PropertyName = "LastName", DisplayName = Localizer["Cognoms"].Value, IsSortable = true },
            new ColumnConfig { PropertyName = "Email", DisplayName = Localizer["Email"].Value, IsSortable = true },
            new ColumnConfig {
                PropertyName = "BirthDate",
                DisplayName = Localizer["Data naixement"].Value,
                IsSortable = true,
                CustomRender = (item) => {
                    var u = item as UserViewModel;
                    return u?.BirthDate.HasValue == true ? u.BirthDate.Value.ToString("dd/MM/yyyy") : "<span class=\"text-muted\">-</span>";
                }
            }
        }
    };
}

<div class="container mt-4">
    <h2>@Localizer["Usuaris (Alumnes)"]</h2>
    <div class="card mt-3">
        <div class="card-body">
            @await Component.InvokeAsync("GenericTable", tableConfig)
        </div>
    </div>
</div>
